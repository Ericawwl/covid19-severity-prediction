# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the master branch
on:
  push:
    branches: [ master ]


# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    - name: Setup timezone
      uses: zcong1993/setup-timezone@master
      with:
        timezone: GMT-7
    - uses: actions/checkout@v2
    - uses: s-weigand/setup-conda@v1
    - run: conda --version
    - run: which python
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
    - uses: actions/checkout@v2
    - name: Install dependencies
      run: |
        conda install numpy
        conda install pandas
        conda install datetime
        conda install plotly
        conda install plotly.express
        conda install bokeh
        conda install sklearn
        conda install IPython
        conda install tqdm
        conda install psutil
        conda install requests
        conda install -c plotly plotly-orca
        bokeh sampledata
        which python
    # Runs a single command using the runners shell
    - name: Generate the county results
      run: python functions/update_search.py

